webpackJsonp([18],{586:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(26),u=r(n),s=a(3),c=r(s),o=a(972),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o),p=a(254),f=r(p);t.default={namespace:"users",state:{list:[],total:0,page:1},reducers:{save:function(e,t){var a=t.payload,r=a.data,n=a.total,u=a.page,s=r;return(0,c.default)({},e,{list:s,total:n,page:u})}},effects:{fetch:u.default.mark(function e(t,a){var r,n=t.payload.page,s=a.call,c=a.put;a.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(l.fetch,n);case 2:return r=e.sent,e.next=5,c({type:"save",payload:{page:n,data:r.data,total:parseInt(r.headers["x-total-count"])}});case 5:case"end":return e.stop()}},e,this)}),create:u.default.mark(function e(t,a){var r,n,s=a.call,c=a.put,o=a.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,s(l.create,r);case 3:return e.next=5,o(function(e){return e.users.page});case 5:return n=e.sent,e.next=8,c({type:"fetch",payload:{page:n}});case 8:case"end":return e.stop()}},e,this)}),edit:u.default.mark(function e(t,a){var r,n,s=a.call,c=a.put,o=a.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,e.next=3,s(l.edit,r);case 3:return e.next=5,o(function(e){return e.users.page});case 5:return n=e.sent,e.next=8,c({type:"fetch",payload:{page:n}});case 8:case"end":return e.stop()}},e,this)}),delete:u.default.mark(function e(t,a){var r,n=t.payload,s=a.call,c=a.put,o=a.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(l.remove,n);case 2:return e.next=4,o(function(e){return e.users.page});case 4:return r=e.sent,e.next=7,c({type:"fetch",payload:{page:r}});case 7:case"end":return e.stop()}},e,this)})},subscriptions:{setup:function(e){var t=e.dispatch;return e.history.listen(function(e){var a=e.pathname,r=e.search,n=f.default.parse(r);"/test/users"===a&&t({type:"fetch",payload:{page:parseInt(n.page)||1}})})}}},e.exports=t.default},972:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.edit=t.create=t.remove=t.fetch=void 0;var n=a(100),u=r(n),s=a(101),c=r(s);t.fetch=function(e){var t="/api/users?_page="+e+"&_limit=3";return(0,c.default)(t)},t.remove=function(e){var t="/api/users/"+e;return(0,c.default)(t,{method:"DELETE"})},t.create=function(e){return(0,c.default)("/api/users",{method:"POST",body:(0,u.default)(e)})},t.edit=function(e){var t=e.id,a=e.value,r="/api/users/"+t;return(0,c.default)(r,{method:"PATCH",body:(0,u.default)(a)})}}});