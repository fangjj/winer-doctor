webpackJsonp([25],{1213:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(119),u=n(a),o=r(3),s=n(o),c=r(149),l=r(2045),i=r(66),d=i.config.prefix;t.default={namespace:"login",state:{token:null},reducers:{save:function(e,t){var r=t.payload,n=r.token;return window.localStorage.setItem(d+"Token",n),(0,s.default)({},e,{token:n})},remove:function(e){return window.localStorage.removeItem(d+"Token"),window.localStorage.removeItem(d+"username"),(0,s.default)({},e,{token:null})}},effects:{login:u.default.mark(function e(t,r){var n,a,o,s,i=t.payload,f=r.put,p=r.call,g=r.select;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(l.login,i);case 2:if(n=e.sent,console.log(n),!n.success){e.next=28;break}return e.next=7,f({type:"save",payload:{token:n.data.token}});case 7:return window.localStorage.setItem(d+"username",n.data.username),e.next=10,f({type:"app/getUserTypes"});case 10:return e.next=12,f({type:"app/getMedicalField"});case 12:return e.next=14,g(function(e){return e.app});case 14:return a=e.sent,o=a.locationQuery,s=o.from,e.next=19,f({type:"app/query"});case 19:if(!s||"/login"===s){e.next=24;break}return e.next=22,f(c.routerRedux.push(s));case 22:e.next=26;break;case 24:return e.next=26,f(c.routerRedux.push("/dashboard"));case 26:e.next=29;break;case 28:throw n;case 29:case"end":return e.stop()}},e,this)})}},e.exports=t.default},2045:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.logout=t.login=void 0;var a=r(119),u=n(a),o=r(287),s=n(o),c=(t.login=function(){var e=(0,s.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)({url:i,method:"post",data:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.logout=function(){var e=(0,s.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)({url:d,method:"delete"}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r(66)),l=c.config.api,i=l.userLogin,d=l.userLogout}});